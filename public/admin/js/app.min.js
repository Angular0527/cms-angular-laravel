!function(){"use strict";angular.module("app",["app.core","app.filters","app.router","app.components","app.services","app.login","app.profile","app.dashboard","app.users","app.posts","app.gallery"])}(),function(){"use strict";angular.module("app.components",[])}(),function(){"use strict";angular.module("app.core",["ui.router","ngResource"])}(),function(){"use strict";angular.module("app.dashboard",["app.core"])}(),function(){"use strict";angular.module("app.filters",[])}(),function(){"use strict";angular.module("app.gallery",["app.core"])}(),function(){"use strict";angular.module("app.login",["app.core"])}(),function(){"use strict";angular.module("app.posts",["app.core","textAngular"])}(),function(){"use strict";angular.module("app.profile",["app.core"])}(),function(){"use strict";angular.module("app.router",["ui.router"])}(),function(){"use strict";angular.module("app.services",["app.core"])}(),function(){"use strict";angular.module("app.users",["app.core"])}(),function(){"use strict";function e(){var e={restrict:"A",scope:{cancel:"&","delete":"&"},templateUrl:"/admin/views/admin.angular_components.modal"};return e}angular.module("app.components").directive("deleteModal",e)}(),function(){"use strict";function e(e){function t(e,t,n){t.bind("change",function(t){var n=t.target.files[0],r=new FileReader;r.onload=function(t){var r="image"===n.type.substring(0,5);e.fileread={url:t.target.result,size:n.size,type:n.type,name:n.name,isImage:r},e.$apply()},r.readAsDataURL(n)})}var n={restrict:"A",scope:{fileread:"="},link:t};return n}angular.module("app.components").directive("fileread",e),e.$inject=["$parse"]}(),function(){"use strict";function e(e){function t(e,t,n){t.bind("change",function(t){var n=t.target.files;e.filereadMultiple=[];for(var r=0;r<n.length;r++)!function(t){var n=new FileReader;n.onload=function(n){var r="image"===t.type.substring(0,5);e.filereadMultiple.push({url:n.target.result,size:t.size,type:t.type,name:t.name,isImage:r}),e.$apply()},n.readAsDataURL(t)}(n[r])})}var n={restrict:"A",scope:{filereadMultiple:"="},link:t};return n}angular.module("app.components").directive("filereadMultiple",e),e.$inject=["$parse"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"/admin/views/admin.angular_components.flash_messages"};return e}angular.module("app.components").directive("flashMessage",e)}(),function(){"use strict";function e(){var e={restrict:"E",scope:{},template:"<div class='preloader'><img src='/admin/images/main/preloader.gif' alt='preloader gif'></div>"};return e}angular.module("app.components").directive("pageLoading",e)}(),function(){"use strict";function e(e){var n="/admin/404";e.configureStates(t(),n)}function t(){return[{state:"404",config:{url:"/admin/404",templateUrl:"/admin/views/admin.error.index"}}]}angular.module("app.core").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){function t(){e.get("/admin/api/dashboard").success(function(e){n.users_count=e.users_count,n.posts_count=e.posts_count,n.galleries_count=e.galleries_count,n.ready=!0})}var n=this;n.getData=t,t()}angular.module("app.dashboard").controller("DashboardController",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"dashboard",config:{url:"/admin/dashboard",templateUrl:"/admin/views/admin.dashboard.index",controller:"DashboardController",controllerAs:"vm",title:"Dashboard"}}]}angular.module("app.dashboard").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){return function(e){var t=["Not Auth","Auth","Admin","Super Admin","Owner"];return t[e]}}angular.module("app.filters").filter("roles",e)}(),function(){"use strict";function e(e,t,n,r){function a(){r.get(function(e){y.galleries=e.data,y.total=e.total,y.next=e.next_page_url,y.ready=!0})}function o(){y.gallery=r.get({id:n.id},function(){y.ready=!0,y.gallery.date=new Date(y.gallery.date)})}function i(){y.loading=!0,r.save(y.gallery,function(e){m(e.message),y.gallery=""},function(e){h(e.data,"Gallery creation failed, see errors below")})}function l(){y.loading=!0,r.update({id:y.gallery.id},y.gallery,function(e){m(e.message)},function(e){h(e.data,"Gallery edition failed, see errors below")})}function s(t,n,r){r?e.post("/admin/api/destroy-gallery-image",{id:t,image_id:r}).success(function(e){var t=y.gallery.gallery_images.indexOf(n);y.gallery.gallery_images.splice(t,1)}):e.post("/admin/api/destroy-gallery-image",{id:t}).success(function(e){y.gallery.image=null})}function u(e){if(e){var t=y.gallery.files.indexOf(e);y.gallery.files.splice(t,1)}else document.getElementById("single-uploader").value=null,y.gallery.file=null}function c(e){y.gallery=e,y.deleteModal=!0}function d(){r["delete"]({id:y.gallery.id},function(e){y.galleries.splice(y.galleries.indexOf(y.gallery),1),y.total=y.total-1,y.deleteModal=!1,y.flash=e.message,t(function(){y.flash=!1},3e3)})}function f(){y.deleteModal=!1}function p(t){e.get(t).success(function(e){y.galleries=y.galleries.concat(e.data),y.next=e.next_page_url})}function g(){e.post("/admin/api/gallery/search",{keyword:y.search}).success(function(e){y.galleries=e.data,y.total=e.total,y.next=e.next_page_url})}function m(e){y.errors="",y.flash=e,y.loading=!1,t(function(){y.flash=!1},5e3)}function h(e,n){y.errors=e,y.loading=!1,y.flashError=n,t(function(){y.flashError=!1},5e3)}var y=this;y.galleries={},y.gallery={},y.create=i,y.update=l,y.deleteGallery=d,y.hideImage=u,y.showDeleteModal=c,y.hideDeleteModal=f,y.deleteImage=s,y.liveSearch=g,y.loadMore=p,n.id||a(),n.id&&o()}angular.module("app.gallery").controller("GalleryController",e),e.$inject=["$http","$timeout","$stateParams","Gallery"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"gallery",config:{url:"/admin/gallery",templateUrl:"/admin/views/admin.gallery.index",controller:"GalleryController",controllerAs:"vm",title:"Gallery"}},{state:"gallery-create",config:{url:"/admin/gallery/create",templateUrl:"/admin/views/admin.gallery.create",controller:"GalleryController",controllerAs:"vm",title:"Create Gallery"}},{state:"gallery-edit",config:{url:"/admin/gallery/:id/edit",templateUrl:"/admin/views/admin.gallery.edit",controller:"GalleryController",controllerAs:"vm",title:"Edit Gallery"}}]}angular.module("app.gallery").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t){function n(){e.post("/admin/login",{user:r.user}).success(function(e){t.location.href="/admin/dashboard"}).error(function(e){r.error=e})}var r=this;r.user={},r.login=n}angular.module("app.login").controller("LoginController",e),e.$inject=["$http","$window"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"login",config:{url:"/admin/login",controller:"LoginController",controllerAs:"vm",title:"Login"}}]}angular.module("app.login").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,n,r){function a(){r.get(function(e){y.posts=e.data,y.total=e.total,y.next=e.next_page_url,y.ready=!0})}function o(){y.post=r.get({id:n.id},function(){y.ready=!0})}function i(){y.loading=!0,r.save(y.post,function(e){m(e.message),y.post=""},function(e){h(e.data,"Post creation failed, see errors below")})}function l(){y.loading=!0,r.update({id:y.post.id},y.post,function(e){m(e.message)},function(e){h(e.data,"Post edition failed, see errors below")})}function s(t,n,r){r?e.post("/admin/api/destroy-post-image",{id:t,image_id:r}).success(function(e){var t=y.post.post_images.indexOf(n);y.post.post_images.splice(t,1)}):e.post("/admin/api/destroy-post-image",{id:t}).success(function(e){y.post.image=null})}function u(e){if(e){var t=y.post.files.indexOf(e);y.post.files.splice(t,1)}else document.getElementById("single-uploader").value=null,y.post.file=null}function c(e){y.post=e,y.deleteModal=!0}function d(){r["delete"]({id:y.post.id},function(e){y.posts.splice(y.posts.indexOf(y.post),1),y.total=y.total-1,y.deleteModal=!1,y.flash=e.message,t(function(){y.flash=!1},3e3)})}function f(){y.deleteModal=!1}function p(t){e.get(t).success(function(e){y.posts=y.posts.concat(e.data),y.next=e.next_page_url})}function g(){e.post("/admin/api/posts/search",{keyword:y.search}).success(function(e){y.posts=e.data,y.total=e.total,y.next=e.next_page_url})}function m(e){y.errors="",y.flash=e,y.loading=!1,t(function(){y.flash=!1},5e3)}function h(e,n){y.errors=e,y.loading=!1,y.flashError=n,t(function(){y.flashError=!1},5e3)}var y=this;y.posts={},y.post={},y.create=i,y.update=l,y.deletePost=d,y.hideImage=u,y.showDeleteModal=c,y.hideDeleteModal=f,y.deleteImage=s,y.liveSearch=g,y.loadMore=p,n.id||a(),n.id&&o()}angular.module("app.posts").controller("PostsController",e),e.$inject=["$http","$timeout","$stateParams","Post"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"posts",config:{url:"/admin/posts",templateUrl:"/admin/views/admin.posts.index",controller:"PostsController",controllerAs:"vm",title:"Posts"}},{state:"post-create",config:{url:"/admin/posts/create",templateUrl:"/admin/views/admin.posts.create",controller:"PostsController",controllerAs:"vm",title:"Create Post"}},{state:"post-edit",config:{url:"/admin/posts/:id/edit",templateUrl:"/admin/views/admin.posts.edit",controller:"PostsController",controllerAs:"vm",title:"Edit Post"}}]}angular.module("app.posts").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,n,r){function a(){r.get().success(function(e){c.authUser=e,c.ready=!0})}function o(){c.loading=!0,n.update({id:c.authUser.id},c.authUser,function(e){s(e.message)},function(e){u(e.data,"User edition failed, see errors below")})}function i(t){e.post("/admin/api/destroy-user-image",{id:t}).success(function(e){c.authUser.file=null,c.authUser.image=null})}function l(){c.authUser.file=!1}function s(e){c.errors="",c.flash=e,c.loading=!1,t(function(){c.flash=!1},5e3)}function u(e,n){c.errors=e,c.loading=!1,c.flashError=n,t(function(){c.flashError=!1},5e3)}var c=this;c.authuser={},c.update=o,c.deleteImage=i,c.hideImage=l,a()}angular.module("app.profile").controller("ProfileController",e),e.$inject=["$http","$timeout","User","AuthUser"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"profile",config:{url:"/admin/profile",templateUrl:"/admin/views/admin.profile.index",controller:"ProfileController",controllerAs:"vm",title:"My Profile"}}]}angular.module("app.profile").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,n){function r(e,r,o,i){function l(e,r){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},a.resolveAlways),t.state(e.state,e.config)}),r&&!p&&(p=!0,n.otherwise(r))}function s(){r.$on("$stateChangeError",function(t,n,r,a,o,l){if(!f){g.errors++,f=!0;var s=n&&(n.title||n.name||n.loadedTemplateUrl)||"unknown target",u="Error routing to "+s+". "+(l.data||"")+". <br/>"+(l.statusText||"")+": "+(l.status||"");i.warning(u,[n]),e.path("/")}})}function u(){s(),d()}function c(){return o.get()}function d(){r.$on("$stateChangeSuccess",function(e,t,n,i,l){g.changes++,f=!1;var s=(t.title||"")+" · "+a.docTitle;r.mainUrl=o.current.url.split("/")[2],r.title=s})}var f=!1,p=!1,g={errors:0,changes:0},m={configureStates:l,getStates:c,stateCounts:g};return u(),m}var a={docTitle:"Admin",resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(a,e)},this.$get=r,r.$inject=["$location","$rootScope","$state"]}angular.module("app.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){function t(){return e.get("/admin/api/auth-user")}var n={get:t};return n}angular.module("app.services").factory("AuthUser",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){return e("/admin/api/gallery/:id",{id:"@_id"},{update:{method:"PUT"}})}angular.module("app.gallery").factory("Gallery",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/admin/api/posts/:id",{id:"@_id"},{update:{method:"PUT"}})}angular.module("app.services").factory("Post",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){return e("/admin/api/users/:id",{id:"@_id"},{update:{method:"PUT"}})}angular.module("app.services").factory("User",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,t,n,r,a){function o(){a.get().success(function(e){U.authUser=e,U.isUploaded=e.image?!0:!1})}function i(){r.get(function(e){U.users=e.data,U.total=e.total,U.next=e.next_page_url,U.ready=!0})}function l(){U.user=r.get({id:n.id},function(){U.ready=!0})}function s(){U.loading=!0,r.save(U.user,function(e){v(e.message),U.user={user_roles:{role:"Role"}}},function(e){$(e.data,"User creation failed see errors below")})}function u(){U.loading=!0,r.update({id:U.user.id},U.user,function(e){v(e.message)},function(e){$(e.data,"User edition failed see errors below")})}function c(){r["delete"]({id:U.user.id},function(e){U.users.splice(U.users.indexOf(U.user),1),U.total=U.total-1,U.deleteModal=!1,U.flash=e.message,t(function(){U.flash=!1},3e3)})}function d(e){U.user=e,U.deleteModal=!0}function f(){U.deleteModal=!1}function p(t){e.get(t).success(function(e){U.next=e.next_page_url,U.users=U.users.concat(e.data)})}function g(){e.post("/admin/api/users/search",{keyword:U.search}).success(function(e){U.users=e.data,U.total=e.total,U.next=e.next_page_url})}function m(){e.post("/admin/api/users/user-role-filter",{role:U.roleFilter}).success(function(e){U.users=e.data,U.total=e.total,U.next=e.next_page_url})}function h(t){e.post("/admin/api/destroy-user-image",{id:t}).success(function(e){document.getElementById("single-uploader").value=null,U.user.image=null})}function y(){document.getElementById("single-uploader").value=null,U.user.file=!1}function v(e){U.errors="",U.flash=e,U.loading=!1,t(function(){U.flash=!1},5e3)}function $(e,n){U.errors=e,U.loading=!1,U.flashError=n,t(function(){U.flashError=!1},5e3)}var U=this;U.user={},U.users={},U.authuser={},U.create=s,U.update=u,U.deleteUser=c,U.hideImage=y,U.deleteImage=h,U.showDeleteModal=d,U.hideDeleteModal=f,U.loadMore=p,U.liveSearch=g,U.filterByRole=m,o(),n.id||i(),n.id&&l()}angular.module("app.users").controller("UsersController",e),e.$inject=["$http","$timeout","$stateParams","User","AuthUser"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"users",config:{url:"/admin/users",templateUrl:"/admin/views/admin.users.index",controller:"UsersController",controllerAs:"vm",title:"Users"}},{state:"user-create",config:{url:"/admin/users/create",templateUrl:"/admin/views/admin.users.create",controller:"UsersController",controllerAs:"vm",title:"Create User"}},{state:"user-edit",config:{url:"/admin/users/:id/edit",templateUrl:"/admin/views/admin.users.edit",controller:"UsersController",controllerAs:"vm",title:"Edit User"}}]}angular.module("app.users").run(e),e.$inject=["routerHelper"]}();